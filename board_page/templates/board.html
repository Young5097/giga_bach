<!DOCTYPE html>
{% load static %}
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>GIGA BACH 메인 페이지</title>
    <link rel="stylesheet" type="text/css" href="{% static 'style/main/style.css' %}">
</head>

<body>
    <h1>Giga Bach</h1>
    <div class="topnav">
        <div class="menu-factor">
            <a href="{% url 'main' %}">메인페이지</a>
            <a href="{% url 'make_song' %}">음원생성</a>
            <a  href="{% url 'make_vocal' %}">보컬생성</a>
            <a class="active"href="{% url 'board' %}">게시판</a>
        </div>
        <div class="login">
            {% if user.is_authenticated %}
                <a class="logout-btn" href="{% url 'logout' %}">로그아웃</a>
                <a class="mypage-btn" href="{% url 'mypage' %}">마이페이지</a>
            {% else %}
                <a class="login-btn" href="{% url 'login' %}">로그인</a>
                <a class="signup-btn" href="{% url 'signup' %}">회원가입</a>
            {% endif %}
        </div>
    </div>

    {% block content %}
    <h3>게시판</h3>

    {% for post in posts %}
        <div class="post">
            <h3>{{ post.title }}</h3>
            <p>{{ post.content }}</p>
            <p>작성자: {{ post.author.username }}</p>
            <p>작성일: {{ post.created_at }}</p>

            {% if user.is_authenticated %}
                {% if user == post.author or user.is_superuser %}
                    <a href="{% url 'delete_post' post.id %}">삭제</a>
                {% endif %}
            {% endif %}
        </div>
    {% endfor %}

    {% if user.is_authenticated %}
        <a href="{% url 'create_post' %}">게시글 작성</a>
    {% else %}
        <p>게시글을 작성하려면 로그인이 필요합니다.</p>
    {% endif %}
    {% endblock %}  

</body>
</html>
